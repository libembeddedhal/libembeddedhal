<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.9.4" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>libembeddedhal: embed::i2c Class Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
  </script>
</head>
<body>
    <div id="top">
      <!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr style="height: 56px;">
              <td id="projectalign" style="padding-left: 0.5em;">
                <div id="projectname">libembeddedhal
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part --><!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classembed_1_1i2c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classembed_1_1i2c-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">embed::i2c Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span><div class="ingroups"><a class="el" href="group__i2c.html">I2c</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract interface.  
 <a href="classembed_1_1i2c.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="i2c_2interface_8hpp_source.html">interface.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structembed_1_1i2c_1_1settings.html">settings</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic settings for a standard I2C device.  <a href="structembed_1_1i2c_1_1settings.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a8e06f4d3fb25d53f22e35e966759c7cc"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1i2c.html#a8e06f4d3fb25d53f22e35e966759c7cc">errors</a> { <a class="el" href="classembed_1_1i2c.html#a8e06f4d3fb25d53f22e35e966759c7cca60b6a4fd29d8c69edbfa9088667a3889">address_not_acknowledged</a>
, <a class="el" href="classembed_1_1i2c.html#a8e06f4d3fb25d53f22e35e966759c7cca76721a72561b5b05b9f3fe74f2fb2f06">bus_error</a>
 }</td></tr>
<tr class="memdesc:a8e06f4d3fb25d53f22e35e966759c7cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">General errors associated with I2C communication failures.  <a href="classembed_1_1i2c.html#a8e06f4d3fb25d53f22e35e966759c7cc">More...</a><br /></td></tr>
<tr class="separator:a8e06f4d3fb25d53f22e35e966759c7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a802971db176ab92aac9d73da22963be4"><td class="memItemLeft" align="right" valign="top">boost::leaf::result&lt; void &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1i2c.html#a802971db176ab92aac9d73da22963be4">configure</a> (const <a class="el" href="structembed_1_1i2c_1_1settings.html">settings</a> &amp;p_settings) noexcept</td></tr>
<tr class="memdesc:a802971db176ab92aac9d73da22963be4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> to match the settings supplied.  <a href="classembed_1_1i2c.html#a802971db176ab92aac9d73da22963be4">More...</a><br /></td></tr>
<tr class="separator:a802971db176ab92aac9d73da22963be4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedde1f6dba8a0f49d3410f0e3e917a7e"><td class="memItemLeft" align="right" valign="top">boost::leaf::result&lt; void &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1i2c.html#aedde1f6dba8a0f49d3410f0e3e917a7e">transaction</a> (std::byte p_address, std::span&lt; const std::byte &gt; p_data_out, std::span&lt; std::byte &gt; p_data_in) noexcept</td></tr>
<tr class="memdesc:aedde1f6dba8a0f49d3410f0e3e917a7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">perform an <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> transaction with another device on the bus. The type of transaction depends on values of input parameters. This function will block until the entire transfer is finished.  <a href="classembed_1_1i2c.html#aedde1f6dba8a0f49d3410f0e3e917a7e">More...</a><br /></td></tr>
<tr class="separator:aedde1f6dba8a0f49d3410f0e3e917a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract interface. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a8e06f4d3fb25d53f22e35e966759c7cc" name="a8e06f4d3fb25d53f22e35e966759c7cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e06f4d3fb25d53f22e35e966759c7cc">&#9670;&nbsp;</a></span>errors</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="classembed_1_1i2c.html#a8e06f4d3fb25d53f22e35e966759c7cc">embed::i2c::errors</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>General errors associated with I2C communication failures. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8e06f4d3fb25d53f22e35e966759c7cca60b6a4fd29d8c69edbfa9088667a3889" name="a8e06f4d3fb25d53f22e35e966759c7cca60b6a4fd29d8c69edbfa9088667a3889"></a>address_not_acknowledged&#160;</td><td class="fielddoc"><p >Error type indicating that the <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> transaction resulted in a NACK, meaning "not acknowledge". NACKs occur when an address has been placed on the <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> bus and no device connected to the bus returned an acknowledge signal. </p>
<p ><b>How to handle these errors:</b></p>
<ul>
<li>In cases where the program is scanning for available addresses, this error is expected behaviour. This is less of an error to handle but an expected return status.</li>
<li>If a driver has a set of possible addresses that it can use, and for that driver it makes sense to attempt to search for the valid address, then a handler can keep performing transactions until a valid address is found and then store that address.</li>
<li>In the case where the address is consistently NACK'ed but the driver expects a specific address, this is typically not handleable and indicates that the application or driver is incorrect in the device address.</li>
<li>In the case where NACK's are spurious, then this may indicate that the <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> line is faulty or the device is misbehaving. This is not fixable in the application. But in some cases, if a software solution is required, the driver or application can simply retry again until a valid response is returned, but results may vary and are very specific to the devices and context of the situation. </li>
</ul>
</td></tr>
<tr><td class="fieldname"><a id="a8e06f4d3fb25d53f22e35e966759c7cca76721a72561b5b05b9f3fe74f2fb2f06" name="a8e06f4d3fb25d53f22e35e966759c7cca76721a72561b5b05b9f3fe74f2fb2f06"></a>bus_error&#160;</td><td class="fielddoc"><p >Error type indicating that the <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> lines were put into an invalid state during the transaction due to interference, misconfiguration of the <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> peripheral or the addressed device or something else. </p>
<p ><b>How to handle these errors:</b></p>
<ul>
<li>In the event of this type of error, state the addressed device undefined. In the case of data reception, the data coming from the addressed device should be considered invalid. Any deeper handling will require deep context regarding the addressed device the transaction taking place. </li>
</ul>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a802971db176ab92aac9d73da22963be4" name="a802971db176ab92aac9d73da22963be4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a802971db176ab92aac9d73da22963be4">&#9670;&nbsp;</a></span>configure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::leaf::result&lt; void &gt; embed::i2c::configure </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structembed_1_1i2c_1_1settings.html">settings</a> &amp;&#160;</td>
          <td class="paramname"><em>p_settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configure <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> to match the settings supplied. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_settings</td><td>- settings to apply to <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> driver </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boost::leaf::result&lt;void&gt; - any error that occurred during this operation. Will return <a class="el" href="structembed_1_1error_1_1invalid__settings.html">embed::error::invalid_settings</a> if the settings could not be achieved. </dd></dl>

</div>
</div>
<a id="aedde1f6dba8a0f49d3410f0e3e917a7e" name="aedde1f6dba8a0f49d3410f0e3e917a7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedde1f6dba8a0f49d3410f0e3e917a7e">&#9670;&nbsp;</a></span>transaction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::leaf::result&lt; void &gt; embed::i2c::transaction </td>
          <td>(</td>
          <td class="paramtype">std::byte&#160;</td>
          <td class="paramname"><em>p_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::span&lt; const std::byte &gt;&#160;</td>
          <td class="paramname"><em>p_data_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::span&lt; std::byte &gt;&#160;</td>
          <td class="paramname"><em>p_data_in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>perform an <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> transaction with another device on the bus. The type of transaction depends on values of input parameters. This function will block until the entire transfer is finished. </p>
<p >Performing Write, Read and Write-Then-Read transactions depends on which span for data_out and data_in are set to null.</p>
<ul>
<li>For write transactions, pass p_data_in as an empty span <code>std::span&lt;std::byte&gt;{}</code> and pass a buffer to p_data_out.</li>
<li>For read transactions, pass p_data_out as an empty span <code>std::span&lt;const std::byte&gt;{}</code> and pass a buffer to p_data_in.</li>
<li>For write-then-read transactions, pass a buffer for both p_data_in p_data_out.</li>
</ul>
<p >In the event of arbitration loss, this function will wait for the bus to become free and try again. Arbitration loss means that during the address phase of a transaction 1 or more <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> bus controllers attempted to perform an transaction and one of the <a class="el" href="classembed_1_1i2c.html" title="Inter-integrated Circuit (I2C) or Two Wire Interface (TWI) communication protocol hardware abstract i...">i2c</a> bus controllers, that isn't this one won out.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_address</td><td>7-bit address of the device you want to communicate with. To perform a transaction with a 10-bit address, this parameter must be the address upper byte of the 10-bit address OR'd with 0b1111'0000 (the 10-bit address indicator). The lower byte of the address must be contained in the first byte of the p_data_out span. </td></tr>
    <tr><td class="paramname">p_data_out</td><td>data to be written to the addressed device. Set to nullptr with length zero in order to skip writing. </td></tr>
    <tr><td class="paramname">p_data_in</td><td>buffer to store read data from the addressed device. Set to nullptr with length 0 in order to skip reading. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boost::leaf::result&lt;void&gt; - any error that occurred during this operation. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/include/libembeddedhal/i2c/<a class="el" href="i2c_2interface_8hpp_source.html">interface.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceembed.html">embed</a></li><li class="navelem"><a class="el" href="classembed_1_1i2c.html">i2c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
