<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.9.4" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>libembeddedhal: embed::can_network Class Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
  </script>
</head>
<body>
    <div id="top">
      <!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr style="height: 56px;">
              <td id="projectalign" style="padding-left: 0.5em;">
                <div id="projectname">libembeddedhal
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part --><!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classembed_1_1can__network.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classembed_1_1can__network-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">embed::can_network Class Reference<div class="ingroups"><a class="el" href="group__can.html">Can</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Manage, store, and organize messages received on the can bus.  
 <a href="classembed_1_1can__network.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="network_8hpp_source.html">network.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1can__network_1_1node__t.html">node_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A can network node stores the can messages in a lock free way.  <a href="classembed_1_1can__network_1_1node__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab753d9f66866c86c81acb75558d6f105"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1can__network.html#ab753d9f66866c86c81acb75558d6f105">can_network</a> (<a class="el" href="classembed_1_1can.html">can</a> &amp;p_can, std::pmr::memory_resource &amp;p_memory_resource) noexcept</td></tr>
<tr class="memdesc:ab753d9f66866c86c81acb75558d6f105"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new can network object.  <a href="classembed_1_1can__network.html#ab753d9f66866c86c81acb75558d6f105">More...</a><br /></td></tr>
<tr class="separator:ab753d9f66866c86c81acb75558d6f105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f2befcc28d123bb84135e6b0f89a5aa"><td class="memItemLeft" align="right" valign="top">boost::leaf::result&lt; <a class="el" href="classembed_1_1can__network_1_1node__t.html">node_t</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1can__network.html#a3f2befcc28d123bb84135e6b0f89a5aa">register_message_id</a> (<a class="el" href="classembed_1_1can.html#a526ae12b76dffd3dda0891247da12b55">can::id_t</a> p_id) noexcept</td></tr>
<tr class="memdesc:a3f2befcc28d123bb84135e6b0f89a5aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate a can id with a node in the can network.  <a href="classembed_1_1can__network.html#a3f2befcc28d123bb84135e6b0f89a5aa">More...</a><br /></td></tr>
<tr class="separator:a3f2befcc28d123bb84135e6b0f89a5aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96a92b6dd1ccf34a0deb2ea82395e646"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classembed_1_1can.html">can</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1can__network.html#a96a92b6dd1ccf34a0deb2ea82395e646">bus</a> () noexcept</td></tr>
<tr class="memdesc:a96a92b6dd1ccf34a0deb2ea82395e646"><td class="mdescLeft">&#160;</td><td class="mdescRight">get a reference to the can peripheral driver  <a href="classembed_1_1can__network.html#a96a92b6dd1ccf34a0deb2ea82395e646">More...</a><br /></td></tr>
<tr class="separator:a96a92b6dd1ccf34a0deb2ea82395e646"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fb560c77706b17c86ba6ecb9239ee20"><td class="memItemLeft" align="right" valign="top">const auto &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1can__network.html#a5fb560c77706b17c86ba6ecb9239ee20">get_internal_map</a> () noexcept</td></tr>
<tr class="memdesc:a5fb560c77706b17c86ba6ecb9239ee20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Internal Map object.  <a href="classembed_1_1can__network.html#a5fb560c77706b17c86ba6ecb9239ee20">More...</a><br /></td></tr>
<tr class="separator:a5fb560c77706b17c86ba6ecb9239ee20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Manage, store, and organize messages received on the can bus. </p>
<p >Drivers use this can bus peripheral manager rather than can directly. This is to ensure that the correct can messages are filtered to the correct driver.</p>
<p >To understand the importance of using this class over can direction consider protocols like UART and I2C. UART is asynchronous and communicates with a single device. Messages may come at an arbitrary time, but their origin is always known. Typically a single device driver holds control over a UART peripheral. I2C is a multi device us but the controller is always the initiator of the communication. Once an I2C controller successfully starts a conversation with another device on the bus, the response should always come from that device. can has this problem where messages can come in at any time from any device on the bus, making writing a driver that accepts the can interface directly impossible as there would be no way to coordinate which driver gets what data when the can interface has only a singular receive method.</p>
<p >Can Network provides a means for routing messages based on ID to can device drivers. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab753d9f66866c86c81acb75558d6f105" name="ab753d9f66866c86c81acb75558d6f105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab753d9f66866c86c81acb75558d6f105">&#9670;&nbsp;</a></span>can_network()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">embed::can_network::can_network </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classembed_1_1can.html">can</a> &amp;&#160;</td>
          <td class="paramname"><em>p_can</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::pmr::memory_resource &amp;&#160;</td>
          <td class="paramname"><em>p_memory_resource</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new can network object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_can</td><td>- can peripheral to manage the network of </td></tr>
    <tr><td class="paramname">p_memory_resource</td><td>- memory resource used for storing can messages </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classembed_1_1can__network_ab753d9f66866c86c81acb75558d6f105_cgraph.svg" width="331" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a96a92b6dd1ccf34a0deb2ea82395e646" name="a96a92b6dd1ccf34a0deb2ea82395e646"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96a92b6dd1ccf34a0deb2ea82395e646">&#9670;&nbsp;</a></span>bus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classembed_1_1can.html">can</a> &amp; embed::can_network::bus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get a reference to the can peripheral driver </p>
<p >Can be used to initialize, configure, and enable the peripheral as well as transmit messages.</p>
<dl class="section return"><dt>Returns</dt><dd>can&amp; reference to the can peripheral driver </dd></dl>

</div>
</div>
<a id="a5fb560c77706b17c86ba6ecb9239ee20" name="a5fb560c77706b17c86ba6ecb9239ee20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fb560c77706b17c86ba6ecb9239ee20">&#9670;&nbsp;</a></span>get_internal_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const auto &amp; embed::can_network::get_internal_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the Internal Map object. </p>
<p >Meant for testing purposes or when direct inspection of the map is useful in userspace. Should not be used in by libraries.</p>
<dl class="section return"><dt>Returns</dt><dd>const auto&amp; map of all of the messages in the network. </dd></dl>

</div>
</div>
<a id="a3f2befcc28d123bb84135e6b0f89a5aa" name="a3f2befcc28d123bb84135e6b0f89a5aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f2befcc28d123bb84135e6b0f89a5aa">&#9670;&nbsp;</a></span>register_message_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::leaf::result&lt; <a class="el" href="classembed_1_1can__network_1_1node__t.html">node_t</a> * &gt; embed::can_network::register_message_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classembed_1_1can.html#a526ae12b76dffd3dda0891247da12b55">can::id_t</a>&#160;</td>
          <td class="paramname"><em>p_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Associate a can id with a node in the can network. </p>
<p >To store can message with an associated ID in the <a class="el" href="classembed_1_1can__network.html" title="Manage, store, and organize messages received on the can bus.">can_network</a>, it must be declared using this method. For example if you expect to get the following IDs 0x140, 0x7AA, and 0x561 from the can bus, then this method must be called as such:</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line"><span class="keyword">auto</span>* motor_node   = BOOST_LEAF_CHECK(network.register_message_id(0x140));</div>
<div class="line"><span class="keyword">auto</span>* encoder_node = BOOST_LEAF_CHECK(network.register_message_id(0x561));</div>
<div class="line"><span class="keyword">auto</span>* fan_node     = BOOST_LEAF_CHECK(network.register_message_id(0x7AA));</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_id</td><td>- Associated ID of messages to be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::bad_alloc</td><td>if this static storage allocated for this object is not enough to hold </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boost::leaf::result&lt;node_t*&gt; - reference to the can BUS network <a class="el" href="classembed_1_1can__network_1_1node__t.html" title="A can network node stores the can messages in a lock free way.">node_t</a> which can be used at anytime to retrieve the latest received message from the can BUS that is associated with the set ID. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::errc::not_enough_memory</td><td>if the internal network map does not have enough space to add this additional node. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/include/libembeddedhal/can/<a class="el" href="network_8hpp_source.html">network.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceembed.html">embed</a></li><li class="navelem"><a class="el" href="classembed_1_1can__network.html">can_network</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
